## 메모리 계층 구조

![](https://blog.kakaocdn.net/dn/WmRDv/btsHtoEYKNl/QkIkNsrckdc5yaeIeLX0J1/img.png)

  

컴퓨터에서 사용하는 메모리를 필요에 따라 여러 종류로 나누어 계층으로 분류한 것이 바로 메모리 계층 구조입니다.

그 구조에는 상위부터 레지스터, 캐시, 주 기억장치, 보조 기억장치로 나눌 수 있습니다.

  

하나씩 알아보겠습니다.

  

## 레지스터

![](https://blog.kakaocdn.net/dn/KUjgx/btsHsHd7u11/3MKv6D690WNPmKbKl2xCdk/img.png)

CPU 구조

- 먼저 레지스터입니다. 레지스터는 CPU 내부에 존재하는 작은 메모리로, CPU에 아주 아주 빠르게 접근할 수 있습니다. 
- CPU 내에서 처리할 명령어나 연산에 사용되는 값들, 혹은 연산에 대한 결과를 일시적으로 저장한다던지 등 컴퓨터에서 사용하는 주 기능을 관할하는 공간으로 보면 됩니다.
- CPU 내부에 존재하기 때문에 메모리 계층 중에서 가장 접근 속도가 빠르지만, 레지스터에 저장되는 데이터는 휘발성을 가지며, 공간이 작고 비싸다는 단점이 있습니다.

CPU는 자체적으로 연산한 데이터를 저장할 수 있는 방법이 없기 때문에 CPU 외부의 메모리로 직접 데이터를 전송할 수 없습니다. 따라서 연산과 같은 작업을 하기 위해서는 반드시 레지스터에 데이터를 담아서 거쳐야 하며, 레지스터는 특정 주소를 가리키거나 값을 읽어오는 방식으로 데이터를 CPU로 주고받을 수 있습니다.

  

레지스터는 역할에 따라 여러 가지 종류가 있습니다. 

- **다음에 실행할 명령어의 주소를 가지는** 프로그램 카운터 - PC(Program Counter)
- **연산 결과 데이터를 일시적으로 저장**하는 누산기 -AC(Accumulator)
- **현재 수행중인 명령어를 가지고 있는** 명령어 레지스터 -IR(Instruction Register)
- **현재 CPU의 상태를 담고 있는** 상태 레지스터 - SR(Status Register)
- **메모리로부터 읽어온 데이터 또는 메모리에 써야할 데이터를 가지고 있는** 메모리 버퍼 레지스터 - MBR(Memory Buffer Register)
- **입출력 장치에 따른 입출력 모듈의 주소를 가지고 있는** 입출력 주소 레지스터 - I/O AR(I/O Address Register)
- **입출력 모듈과 프로세서 간의 데이터 교환을 위해 사용되는** 입출력 버퍼 레지스터 - I/O BR(I/O Buffer Register)

  

## 캐시

![](https://blog.kakaocdn.net/dn/niQiV/btsHtcZfhli/optHzDt50wbFbG9pVV9Rm1/img.png)

다음은 캐시 계층입니다. 속도가 빠른 장치와 느린 장치 사이에서 속도차에 따른 병목 현상을 줄이기 위한 범용 메모리로 사용되는 캐시 메모리는 데이터나 값을 미리 복사해 놓는 임시 장소로, 시스템의 효율성을 위해 사용됩니다.

- CPU 내 또는 CPU 바로 옆에 존재하는 L1, L2 캐시를 말하며, 레지스터와 마찬가지로 휘발성이 있고, 속도도 빠르지만 기억용량이 적다는 점이 단점입니다. 
    - **L1 캐시** : 일반적으로 CPU 칩 안에 내장되어 데이터 사용 및 참조에 가장 먼저 사용되는 캐시 메모리. CPU 내부에 있어 CPU 성능에 영향을 줌.
    - **L2 캐시** : L1 캐시 메모리와 용도와 역할이 비슷하지만 L1 보다는 느림. L1 캐시에서 데이터를 찾지 못하는 경우 L2로 넘어오게 됩니다. L2 캐시는 L1 캐시보다 느리지만, 일반 메모리(RAM)보다는 빠릅니다.
    - **L3 캐시** : L1, L2 캐시와 동일한 원리로 작동하며 보통 CPU 내부가 아닌 메인보드에 내장되어 있어 CPU 성능에 직접적인 영향을 주진 않습니다. L2 캐시로 충분히 커버되기 때문에 웬만해서는 사용되지 않음.

  

## 주 기억장치 - 메인 메모리

메인 메모리는 일반적으로 말하는 RAM으로 컴퓨터에서 수치, 명령, 자료 등을 기억하는 메모리입니다.

### RAM

- 빠른 접근을 위해 데이터를 단기간 저장하는 공간으로, 사용자가 요청하는 프로그램이나 문서를 스토리지 디스크 -> RAM으로 로드하여 프로세스화 합니다.
- 휘발성 기억장치로 전원 종료 시 기억된 내용이 삭제되며, 전원이 유지되는 동안 CPU의 연산 및 동작에 필요한 모든 내용을 저장합니다.

  

## 보조 기억장치 - HDD, SSD

보조 기억장치로 비휘발성 데이터 저장소이며, 용량이 크고 가격이 비교적 저렴하지만, 위 계층들에 비하면 속도가 느리다는 점.

대표적으로 HDD, SSD를 일컬어 보조기억장치라고 합니다.

  

  

## 계층이 존재하는 이유

이렇게 레지스터, 캐시, 주기억장치, 보조기억장치 4가지 계층에 대해 알아보았습니다.

그렇다면 이와 같은 계층이 왜 존재할까요?

  

### 참조의 지역성

우린 보통 많이쓰는 것을 다시 자주 사용합니다. 즉, 큰 메모리를 사용한다고 해서 모든 데이터를 고르게 접근하지 않습니다.

자주 쓰이는 데이터는 계속 자주 쓰이고, 반대로 자주 안쓰이는 데이터는 계속 자주 쓰이지 않는다는 말입니다.

그래서 자주 사용하는 데이터들에 대해서는 빠르게 접근하기 위해 상위 메모리에 데이터를 담아두고 사용하는 것이죠. 


### 비용의 효율성

캐시메모리는 비싸고 아래로 갈수록 비용은 비교적 저렴합니다. 계층이 있고 캐싱 때문에 비용을 좀 더 효율적으로 쓸 수 있습니다.

  


### 효율적 자원 사용

자주 쓰는 데이터는 빠른 메모리에, 덜 쓰는 데이터는 느린 메모리에 저장하여 자원을 효율적으로 사용할 수 있습니다. 이렇게 하면 접근하지 않은 데이터에 빠른 메모리를 사용하지 않기 때문에 자원을 낭비하지 않게 됩니다.